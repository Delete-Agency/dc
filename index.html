<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>DC examples</title>
    <link rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous">
    <link rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/prismjs@1.17.1/themes/prism-okaidia.css">

    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.17.1/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.17.1/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@deleteagency/live-highlight@0.0.1/build/live-highlight.min.js"></script>

    <script src="build/dc.min.js"></script>
</head>

<script>
    LiveHighlight.bootstrap((element, type) => {
        function getLanguage(type) {
            switch (type) {
                case LiveHighlight.TYPE_JAVASCRIPT:
                    return 'js';
                case LiveHighlight.TYPE_STYLES:
                    return 'css';
                case LiveHighlight.TYPE_HTML:
                    return 'markup';
            }
        }

        element.className = `lang-${getLanguage(type)}`;
        Prism.highlightElement(element);
    });
</script>
<style>
    .example {
        position: relative;
        padding: 1rem;
        margin: 1rem -15px 0;
        border: solid #f8f9fa;
        border-width: .2rem 0 0
    }

    @media (min-width: 576px) {
        .example {
            padding:1.5rem;
            margin-right: 0;
            margin-left: 0;
            border-width: .2rem
        }
    }
</style>
<body>
<div class="py-4">
    <div class="container">
        <h1>DC Examples</h1>

        <div class="mb-5">
            <h2>Simple example</h2>
            <p>
                To enable your component's logic on some DOM element you can either
            </p>
            <ul>
                <li>
                    Add <b>data-dc-component-${namespace}</b> attribute to the element,
                    when "namespace" is the value of the getNamespace() static method of the component class.
                </li>
                <li>
                    If you can't or don't want to use default searching strategy
                    pass second argument of the dcFactory.register to set css selector which will be used for searching elements
                </li>
            </ul>


            <div data-live-highlight-target="simple"></div>

            <div class="example mb-5">
                <div class="collapsed" id="simple-collapsed" data-live-highlight="simple"
                        data-dc-component-collapsed
                        data-dc-collapsed-options='{"speed": 500, "ease": "linear"}'>
                    <button class="collapsed__button" data-dc-collapsed-ref="button">
                        Toggle
                    </button>
                    <div class="collapse card card-body" data-dc-collapsed-ref="content">
                        Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. Curabitur non nulla sit amet nisl tempus convallis quis ac lectus.
                    </div>
                </div>
            </div>

            <script data-live-highlight="simple">
                class CollapsedComponent extends DcBaseComponent {
                    constructor(...args) {
                        super(...args);

                        this.onClick = this.onClick.bind(this);
                    }

                    static getNamespace() {
                        return 'collapsed'
                    }

                    onInit() {
                        console.log('CollapsedComponent was instantiate on the element', this.element);
                        console.log('Options', this.options);
                        console.log('Refs', this.refs);

                        this.refs.button.addEventListener('click', this.onClick);
                    }

                    onClick() {
                        if (this.refs.content.classList.contains('show')) {
                            this.refs.content.classList.remove('show');
                        } else {
                            this.refs.content.classList.add('show');
                        }
                    }
                }
            </script>

            <p>
                Call dcFactory.register with your components, and then starts the factory by calling
                dcFactory.init()
            </p>

            <script data-live-highlight>
                dcFactory.register(CollapsedComponent);
                dcFactory.init();
            </script>
        </div>

    </div>
</div>
</body>
</html>